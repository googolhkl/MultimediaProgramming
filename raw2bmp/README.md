# Raw To BMP
##### Raw 파일을 BMP 파일로 변환하는 코드<br />
##### 256 * 256 흑백 영상<br />
##### 8bits/pixel<br />

## Raw 파일과 BMP 파일 비교하기
##### 아래 표와 같이 Raw 파일에는 헤더 정보가 없고 순수히 데이터만 존재하고, BMP파일에는 헤더 정보(파일 정보, 비트맵 정보,컬러 테이블)와 데이터가 존재한다.

| Format | RAW 파일 | BMP 파일 |
| --- | --- | --- |
| 헤더 정보 | 없음 | 파일 정보<br /> 비트맵 정보<br /> 컬러 테이블<br /> |
| 데이터 | 사진 데이터 | 사진 데이터 | 

# Raw 파일이란?
##### `Raw 이미지 파일`은 이미지 파일 포맷 중 하나로 이미지 센서로부터 최소한으로 처리한 데이터를 포함하고 있는 것이다.<br />
##### 말 그대로 가공하지 않은 상태이고 `화이트밸런스`, `파라미터`, `색공간`등이 정해져 있지 않고 빛의 세기에 대한 정보만 가지고 있다.<br />

# BMP 파일이란?
##### `BMP 파일 포맷`은 비트맵 디지털 그림을 저장하는 데 쓰이는 그림 파일 포맷이다.<br />

## 데이터 블록
##### 일반적으로 쓰이는 BMP는 아래와 같은 데이터 블록을 담고 있다.

| | |
| --- | --- |
| BMP 헤더 | BMP 파일에 대한 일반 정보를 담고 있다. |
| 비트맵 정보(DIB헤더) | 비트맵 그림에 대한 자세한 정보를 담고 있다. |
| 색 팔레트 | 인렉스 컬러 비트맵에 쓰이는 색의 정의를 담고 있다. |
| 비트맵 데이터 | 화소 대 화소 단위의 실제 그림을 담고 있다. |

## BMP 파일 헤더

| 오프셋# | 변수명 |  크기 | 목적 |
| --- | --- | --- | --- | 
| 0 | bfType | 2 | BMP 파일을 식별하는 데 쓰이는 매직 넘버: 0x42 0x4D (B와 M에 대한 ASCII 코드 포인트) |
| 2 | bfSize | 4 | BMP 파일 크기 (바이트 단위) |
| 6 | bfReserve1 | 2 | 준비. 실제값은 그림을 만드는 데 쓰인 응용 프로그램에 따라 달라진다. |
| 8 | bfReserve2 | 2 | 준비. 실제값은 그림을 만드는 데 쓰인 응용 프로그램에 따라 달라진다. |
| 10 | bfOffBits | 4 | 비트맵 데이터를 찾을 수 있는 시작 오프셋 (바이트 단위) |

## 비트맵 정보 (DIB 헤더)
##### 기본적으로 쓰이는 비트맵 정보는 다음과 같다.<br />

| 크기 | 헤더 | 식별자 | GDI 지원 |
| --- | --- | --- | --- |
| 40 | 윈도 V3 | BITMAPINFOHEADER | 윈도 3.0 이후의 모든 윈도 버전 |
| 12 | OS/2 V1 | BITMAPCOREHEADER | OS/2 및 윈도 3.0 이후의 모든 윈도 버전 |
| 64 | OS/2 V2 | | |
| 108 | 윈도 V4 | BITMAPV4HEADER | 윈도95/NT4 이후의 모든 윈도 버전 |
| 124 | 윈도 V5 | BITMAPV5HEADER | 윈도 90/2000 이상 |

##### 호환성을 이유로 대부분의 응용 프로그램은 파일을 저장할 때 오래된 `DIB 헤더`를 사용한다. OS/2가 물러나자, 이제 일반적으로 쓰이는 포맷은 `V3 헤더`가 되었다. 더 자세한 것은 아래 표를 보자.<br />

| 오프셋# | 변수명 | 크기 | 목적 |
| --- | --- | --- | --- |
| 14 | biSize | 4 | 이 헤더의 크기(40 바이트) |
| 18 | biWidth | 4 | 비트맵 가로 (단위는 화소, signed integer). |
| 22 | biHeight |  4 | 비트맵 가로 (단위는 화소, signed integer). |
| 26 | biPlanes | 2 | 사용하는 색 판(color plane)의 수. 1로 설정해야 한다. |
| 28 | biBitCount | 2 | 한 화소에 들어가는 비트 수이며 그림의 색 깊이를 뜻한다. 보통 값은 1, 4, 8, 16, 24, 32이다. |
| 30 | biCompression | 4 | 압축 방식. 가능한 값에 대한 목록은 다음 표를 참조하자. |
| 34 | biSizeImage | 4 | 그림 크기. 압축되지 않은 비트맵 데이터의 크기(아래 참조)이며, 파일 크기와 혼동하지 말 것. |
| 38 | biXPelsPerMeter | 4 | 그림의 가로 해상도. (미터 당 화소, signed integer) |
| 42 | biYPelsPerMeter | 4 | 그림의 세로 해상도. (미터 당 화소, signed integer) |
| 46 | biClrUsed | 4 | 색 팔레트의 색 수, 또는 0에서 기본값 2^n. |
| 50 | biClrImportant | 4 | 중요한 색의 수. 모든 색이 중요할 경우 0. 일반적으로 무시. |

##### 압축 방식 (바이트 #30-33)은 다음의 값을 가진다. BI_RGB 비트맵의 경우 그림 크기 필드는 0이 될 수 있다.<br />

| 값 | 식별자 | 압축 방식 | 비고 |
| --- | --- | --- | --- |
| 0 | BI_RGB | 없음 | 가장 일반적이다. |
| 1 | BI_RLE8 | RLE 8비트/화소 | 8비트/화소 비트맵에서만 사용할 수 있다. |
| 2 | BI_RLE4 | RLE 4비트/화소 | 4비트/화소 비트맵에만 사용할 수 있다. |
| 3 | BI_BITFIELDS | 비트 필드 | 16, 32 비트/화소 비트맵에만 사용할 수 있다. |
| 4 | BI_JPEG | JPEG | 비트맵은 JPEG 이미지를 포함한다. |
| 5 | BI_PNG | PNG | 비트맵은 PNG 이미지를 포함한다. |

##### OS/2 V1 헤더 또한 자주 쓰인다. OS/2 V1 비트맵은 압축할 수 없으며 한 화소에 16/32 비트의 정보를 담을 수 없다. OS/2 V1 헤더의 모든 값은 부호 없는 정수다.<br />

| 오프셋 | 크기 | 목적 |
| --- | --- | --- |
| 14 | 4 | 이 헤더의 크기 (12 바이트) |
| 18 | 2 | 비트맵 가로 (화소). |
| 20 | 2 | 비트맵 세로 (화소). |
| 22 | 2 | 색판의 수. 1이 유일한 유효값이다. |
| 24 | 2 | 한화소에 들어가는 비트 수. 일반적으로 1, 4, 8, 24의 값이 쓰인다. |

  
# Build & Run
##### 빌드와 실행은 아래를 따라하자.<br />
```
$ make
$ ./main
 RAW File Name : Lena.raw
 BMP File Name : Lena.bmp
 Raw Width : 256
 Raw Height : 256
```











